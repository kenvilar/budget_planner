<!DOCTYPE html>


<html>
	<!-----head for facebook story read------->
     <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# profile: http://ogp.me/ns/profile#">
 		<meta property="fb:app_id" content="1382388548666955" /> 
		<meta property="og:type"   content="profile" /> 
	  	<meta property="og:url"    content="#moneySaved" /> <!----Put URL to the object here---->
		<meta property="og:title"  content="I saved this much" /> <!---- Put title here ----->
		<meta property="og:image"  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
	        <meta charset="utf-8" />
	        <meta name="format-detection" content="telephone=no">
	<!----------Kutob Diari----------->


        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        
        <!-- <link rel="stylesheet" type="text/css" href="jquery.mobile-1.4.1.min.css">
		<script type="text/javascript" src="jquery.mobile-1.4.1.min.js"></script>
		<script type="text/javascript" src="jquery-2.1.0.min.js"></script> -->

		<link rel="stylesheet" type="text/css" href="jquery.mobile-1.4.1/jquery.mobile-1.4.1.min.css">
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="jquery.mobile-1.4.1/jquery.mobile-1.4.1.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
		
		<!--Noty library-->
		<script type="text/javascript" src="noty/js/noty/jquery.noty.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/bottom.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/bottomCenter.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/bottomLeft.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/bottomRight.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/center.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/centerLeft.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/centerRight.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/inline.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/top.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/topCenter.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/topLeft.js"></script>
		<script type="text/javascript" src="noty/js/noty/layouts/topRight.js"></script>
		<link rel="stylesheet" type="text/css" href="noty/css/buttons.css">
		<script type="text/javascript" src="noty/js/noty/themes/default.js"></script>




		<script type="text/javascript" charset="utf-8">	

			$(document).ready(function () {				
				
				$('#txMoney').keyup(function () {
					$('#txTarget').val($('#txMoney').val()/2);
					$('#txTarget').attr('max',$('#txMoney').val());
				});
				
				$('#txAmount').keyup(function() {
					$('#total').val($('#txAmount').val() * $('#txOccurence').val());			
				});

				$('#txOccurence').hide();
				
	
				$('#txFrequency').change(function () {
    					if($('#txFrequency').val() == "4"){
						$('#txOccurence').val('4');
						$('#total').val($('#txAmount').val() * $('#txOccurence').val());
						$('#txOccurence').hide();			
					}
					else if($('#txFrequency').val() == "1"){
						$('#txOccurence').val('1');
						$('#total').val($('#txAmount').val() * $('#txOccurence').val());
						$('#txOccurence').hide();				
					}
					else{
						$('#txOccurence').val('');
						$('#txOccurence').show();
						$('#total').val($('#txAmount').val() * $('#txOccurence').val());				
					}
  				}).change();

				$('#txOccurence').keyup(function() {
					$('#total').val($('#txAmount').val() * $('#txOccurence').val());			
				});
				
				$("#addExpensePage").on("tap",function(){
  					$('#total').val($('#txAmount').val() * $('#txOccurence').val());
				});

				$("#addExpensePage").mousemove(function( event ) {
  					$('#total').val($('#txAmount').val() * $('#txOccurence').val());
				});
				
				
			});
			
				
			
			

			var db;
			var shortName = 'BudgetDB';
			var version = '1.0';
			var displayName = 'BudgetDB';
			var maxSize = 200;

			function errorHandler(transaction, error) {
   				alert('Error: ' + error.message + ' code: ' + error.code);
			}

			function successCallBack() {
   				alert("DEBUGGING: success");
 			}

			function nullHandler(){};

			function onBodyLoad(){
 				//alert("DEBUGGING: we are in the onBodyLoad() function");
 				if (!window.openDatabase) {
   					alert('Databases are not supported in this browser.');
   				return;
 				}
 
 				db = openDatabase(shortName, version, displayName,maxSize);
 	 			db.transaction(function(tx){

 				// Kung ganahan ta ug create-drop na db
  				//tx.executeSql( 'DROP TABLE BudgetDB',nullHandler,nullHandler);


 				tx.executeSql( 'CREATE TABLE IF NOT EXISTS BudgetDB(BudgetId INTEGER NOT NULL PRIMARY KEY, Name TEXT NOT NULL, Money INTEGER NOT NULL, Target INTEGER NOT NULL, Date Date NOT NULL)', [],nullHandler,errorHandler);},errorHandler,nullHandler);
				
				db.transaction(function(tx){

 				tx.executeSql( 'CREATE TABLE IF NOT EXISTS Expense(ExpenseId INTEGER NOT NULL PRIMARY KEY, Description TEXT NOT NULL, Amount INTEGER NOT NULL, Category TEXT NOT NULL, Occurence INTEGER NOT NULL, Date Date NOT NULL, Budget INTEGER)', [],nullHandler,errorHandler);},errorHandler,nullHandler);
				
 				ListDBValues();
 				GetName(id);
			}

			function ListDBValues() {
 				if (!window.openDatabase) {
  					alert('Databases are not supported in this browser.');
  				return;
 				}
 
 				html = '';
 				$('#Budgets').html('');
 
				db.transaction(function(transaction) {
   					transaction.executeSql('SELECT * FROM BudgetDB;', [],
     					function(transaction, result) {
      					if (result != null && result.rows != null) {
      						html = html + '<ul data-role="listview">';
        					for (var i = 0; i < result.rows.length; i++) {
          						var row = result.rows.item(i);
          					
    					        html += '<li>';
    					        html += '<a href="#editBudget" onClick=GetName(' + row.BudgetId +') class="ui-btn ui-corner-all ui-shadow ui-btn-icon-right ui-icon-carat-r">'+row.Name+ ' , ' + row.Target + '</a>';
    					        html += '</li>';
        						}
        					html += '</ul>';
        					$('#Budgets').append(html);
      						}
     					},errorHandler);
 					},errorHandler,nullHandler);
 
 					return;
			}
			
			function viewSummary() {
 				if (!window.openDatabase) {
  					alert('Databases are not supported in this browser.');
  				return;
 				}
 
 				html = '';
 				$('#viewSummaryPage').html('');
 				
 				var currentBudgetId = $('#currentBudgetID').val();
 				
				db.transaction(function(transaction) {
   					transaction.executeSql('SELECT * FROM Expense where Budget= ?;', [currentBudgetId],
     					function(transaction, result) {
      					if (result != null && result.rows != null) {
      						<!-- html = html + '<center><h2>Summary</h2><center>'; -->
      						html = html + '<table style="width:100%" data-role="table" id="temp-table" data-mode="reflow" class="ui-responsive table-stroke">';
      						html += '<thead><tr><th>Date</th><th>Description</th><th>Category</th><th>Amount</th><th></th></tr></thead>';
							var totalExpenses = 0;
							
							var month=new Array();
							month[0]="Jan";
							month[1]="Feb";
							month[2]="Mar";
							month[3]="Apr";
							month[4]="May";
							month[5]="Jun";
							month[6]="Jul";
							month[7]="Aug";
							month[8]="Sep";
							month[9]="Oct";
							month[10]="Nov";
							month[11]="Dec";
							
        					for (var i = 0; i < result.rows.length; i++) {
          						var row = result.rows.item(i);
								
								var myDate = new Date(row.Date);
								//var newDate = formatDate(myDate,"MMM d, y");
								totalExpenses += row.Amount;
    					        html += '<tbody><tr>';
<<<<<<< HEAD
    					        html += '<a><td><center>' + month[myDate.getMonth()] +'-'+myDate.getDate()+'-'+myDate.getFullYear()+ '</center></td> <td><center>'+ row.Description +'</center></td> <td><center>' + row.Category + '</center></td> <td><center>' + row.Amount + '</center></td><td><center><a class="ui-btn ui-btn-b" data-inline="true" data-mini="true" onClick="DeleteExpense(' + row.ExpenseId +')">Delete</a></center></td></a>';
=======
    					        html += '<a><td><center>' + month[myDate.getMonth()] +'-'+myDate.getDate()+'-'+myDate.getFullYear()+ '</center></td> <td><center>'+ row.Description +'</center></td> <td><center>' + row.Category + '</center></td> <td><center>' + row.Amount + '</center></td><td><center><a class="ui-btn ui-btn-b ui-shadow ui-corner-all" onClick="confirmDeleteExpense(' + row.ExpenseId +')">Delete Expense</a></center></td></a>';
>>>>>>> d4fe10dfbba6e1c9d5cb48fa4ad1c41daf685bcc
    					        html += '</tr></tbody>';
        						}
        					html += '</table>';
							html += '<center><h3><font color="">Total Expenses: â‚±'+ totalExpenses +'</font></h3></center>';
        					html +=	'<a href="#editBudget" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-back ui-btn-b">Back</a>';
        					$('#viewSummaryPage').append(html);
      						}
     					},errorHandler);
 					},errorHandler,nullHandler);
 
					$.mobile.changePage("index.html#SummaryPage");
 					return;
			}




			function clearAddBudgetField() {
				$('#txTarget').val('');
				$('#txName').val('');
				$('#txMoney').val('');

				return;
			}


			function alertSuccess(successType) {
				var message;
				switch(successType){
					case 1:
						message = "Added successfully!";
						break;
					case 2:
						message = "Expense added successfully!";
						break;
					case 3:
						message = "Expense deleted successfully!";
						break;
					case 4:
						message = "Budget deleted successfully!";
						break;
					case 5:
						message = "Budget updated successfully!";

				}			
					
				$.noty.defaults = {
					layout: 'topCenter', 
					theme: 'defaultTheme',
					dismissQueue: true, 
					maxVisible: 1, 
					template: '<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',
					animation: {  
						open: {height: 'toggle',opacity:'1'}, 
						close: {height: 'toggle',opacity:'0.1'}, 
						easing: 'linear', 
						speed: 200 
					},
					timeout: 2500, 
					force: false, 
					modal: false, 
					closeWith: [ 'click'],
					callback: {
						onShow: function() {},
						afterShow: function() {},
						onClose: function() {},
						afterClose: function() {}
					}
				};
				var n = noty({
					text: ''+ message +'', 
					type: 'success', 
					buttons:false
				});
			
			}

			function executeAlert(errorType){
				var message;
				switch(errorType){
					case 1:
						message = "Please type in a Budget name";
						break;
					case 2:
						message = "Please type in a valid Name of your budget";
						break;
					case 3:
						message = "Please type in your income";
						break;
					case 4:
						message = "Please type in a positive income";
						break;
					case 5:
						message = "Please type in a Valid number";
						break;
					case 6:
						message = "Please type in your Target saving";
						break;
					case 7:
						message = "Please type in a positive Target saving";
						break;
					case 8:
						message = "The Target saving is the same with your income";
						break;
					case 9:
						message = "Please type in a Valid number";
						break;
					case 10:
						message = "Please type in the Description of your expense";
						break;
					case 11:
						message = "Please type in the valid Description of your expense";
						break;
					case 12:
						message = "Please type in the Amount of your expense";
						break;
					case 13:
						message = "The amount you typed in is negative";
						break;
					case 14:
						message = "The amount you are trying to spend is bigger than the remaining budget and will obstruct you from getting the target savings";
						break;
					case 15:
						message = "Please type a valid Amount of your expense";
						break;
					case 16:
						message = "Please type in the number of occurence of your expense";
						break;
					case 17:
						message = "The occurence of expense you typed in is negative";
						break;
					case 18:
						message = "Please type in a valid number of occurence of your expense";
						break;
					case 19:
						message = "Please enter your new budget name";
						break;
					case 20:
						message = "Please enter a valid Budget name";
						break;
					case 21:
						message = "Please enter your new Target savings";
						break;
					case 22:
						message = "Please enter a positive Target savings";
						break;
					case 23:
						message = 'The Target savings you entered is bigger than your money which is â‚±'+ $('#MyMoneyHidden').val() +'';
						break;
					case 24:
						message = "Please enter a valid Target Savings";
						break;
					
				}
			
				$.noty.defaults = {
					layout: 'topCenter', 
					theme: 'defaultTheme',
					dismissQueue: true, 
					maxVisible: 1, 
					template: '<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',
					animation: {  
						open: {height: 'toggle',opacity:'1'}, 
						close: {height: 'toggle',opacity:'0.1'}, 
						easing: 'linear', 
						speed: 200 
					},
					timeout: 2500, 
					force: false, 
					modal: false, 
					closeWith: [ 'click'],
					callback: {
						onShow: function() {},
						afterShow: function() {},
						onClose: function() {},
						afterClose: function() {}
					}
				};
				var n = noty({
					text: ''+ message +'', 
					type: 'error', 
					buttons:false
				});

				
			}

			function validateEditBudgetInputs() {
				var newBudgetName = $.trim($('#bdgtnm').val());
				if(newBudgetName == 0){
					//alert("Please enter your new budget name");
					executeAlert(19);
					$("#bdgtnm").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					return;
				}
				else{
					if($.isNumeric(newBudgetName)){
						//alert("Please enter a valid Budget name");
						executeAlert(20);
						$("#bdgtnm").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						return;
					}
				}
			
				var newTarget = $.trim($('#trgt').val());
				if(newTarget == 0){
					executeAlert(21);
					//alert("Please enter your new Target savings");
					$("#trgt").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					return;
				}
				else{
					if($.isNumeric(newTarget)){
						if(new Number(newTarget) < 0){
							//alert("Please enter a positive Target savings");
							executeAlert(22);
							$("#trgt").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
							return;
						}
						else if(new Number(newTarget) > new Number($('#MyMoneyHidden').val())){
							//alert('The Target savings you entered is bigger than your money which is â‚±'+ $('#MyMoneyHidden').val() +'');				
							executeAlert(23);			
							$("#trgt").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
							return;
						}
						else{
							updateBudget();
						}
					}
					else{
						//alert("Please enter a valid Target Savings");
						executeAlert(24);
						$("#trgt").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						return;
					}
				}

			}


			
			
			<!---------------------------------->
			function connectToFacebook(){
				$('#txFbUsername').val('');
				$('#txFbPassword').val('');
				
				return;
			}
			<!---------------------------------->

			function clearAddExpenseField() {
				$('#txDescription').val('');
				$('#txAmount').val('');
				return;
			}

			function clearEditBudgetField(){
				$('#bdgtnm').val('');
				$('#trgt').val('');
			}

			function AddValueToDB() {
				if (!window.openDatabase) {
					alert('Databases are not supported in this browser.');
					return;
				}

				db.transaction(function(transaction) {
				transaction.executeSql(
					'INSERT INTO BudgetDB(Name, Money, Target, Date) VALUES (?,?,?,?)',[ $('#txName').val(), $('#txMoney').val(), $('#txTarget').val(), $('#txDateCreated').val()], nullHandler, errorHandler);
				});
					//alert("Added successfully!");
					window.history.back();
					
				ListDBValues();
				alertSuccess(1);
				GetName(id);
				//$.mobile.changePage("index.html#mainpage");
				
				return false;
			}


			function AddExpense() {
				db.transaction(function(transaction) {
					transaction.executeSql('INSERT INTO Expense(Description, Amount, Category, Occurence, Date, Budget) VALUES (?,?,?,?,?,?)', [ $('#txDescription').val(), $('#txAmount').val(), $('#txCategory').val(), $('#txOccurence').val(), $('#txDate').val(), $('#currentBudgetID').val()], nullHandler, errorHandler);
				});

				GetName($('#currentBudgetID').val());
				$.mobile.changePage("index.html#editBudget");
				alertSuccess(2);
				//window.alert("Expense added successfully!");
				return;
			}

			function confirmDeleteExpense(id){
				$.noty.defaults = {
					layout: 'topCenter', 
					theme: 'defaultTheme',
					dismissQueue: true, 
					maxVisible: 1, 
					template: '<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',
					animation: {  
						open: {height: 'toggle',opacity:'1'}, 
						close: {height: 'toggle',opacity:'0.1'}, 
						easing: 'linear', 
						speed: 200 
					},
					timeout: false, 
					force: false, 
					modal: true, 
					closeWith: [ 'click'],
					callback: {
						onShow: function() {},
						afterShow: function() {},
						onClose: function() {},
						afterClose: function() {}
					}
				};
				var n = noty({
					text: 'Are you sure you want to Delete?', 
					type: 'confirm', 
					buttons: [
    							{addClass: 'btn btn-primary', text: 'Ok', onClick: function($noty) {
							        $noty.close();
									confirmedDeleteExpense(id);
							 	}
    							},
							{addClass: 'btn btn-danger', text: 'Cancel', onClick: function($noty) {
								$noty.close();
								
								}
							}
						]
					});
			}
			
			function confirmedDeleteExpense(id) {
				
					db.transaction(function(transaction) {
						transaction.executeSql('DELETE FROM Expense WHERE ExpenseId = ?;', 
															[id], nullHandler, errorHandler);
					});
					alertSuccess(3);
					//window.alert("Expense deleted successfully!");
					GetName(id);
					viewSummary();
				
				return;	
			}
			

			function getDaysBetween(date1, date2) {
  					//Get 1 day in milliseconds
  					var one_day=1000*60*60*24;

  					// Convert both dates to milliseconds
 					var date1_ms = date1.getTime();
  					var date2_ms = date2.getTime();

  					// Calculate the difference in milliseconds
  					var difference_ms = date2_ms - date1_ms;
    
  					// Convert back to days and return
  					return Math.round(difference_ms/one_day); 
			}

			function GetName(id) {
				$('#currentBudgetID').val(id);
 				if (!window.openDatabase) {
  					alert('Databases are not supported in this browser.');
  					return;
 				}
				
 				$('#MyTarget').html('');
 				$('#MyName').html('');
				$('#dailyBudget').html('');
				$('#monthlyBudget').html('');
 				$('#MyMoney').html('');
				$('#recommendedExpense').html('');
				var budgetDate;
				var totalMoney;
				var targetSavings;
				var totalExpense = 0;
				var differences;
				var lastDayOfBudgetMonth;
				var monthlyBudgetLeft;
				var dailyBudgetLeft;
				var dateToday = new Date();

				db.transaction(function(transaction) {
   					transaction.executeSql('SELECT Name,Money,Date,Target,BudgetId FROM BudgetDB WHERE BudgetId = ?;', [id],
     					function(transaction, result) {
      					if (result != null && result.rows != null) {
        					for (var i = 0; i < result.rows.length; i++) {
          						var row = result.rows.item(i);
          						$('#MyName').append(row.Name);
          						$('#MyMoney').append(row.Money);
							$('#MyMoney').append('<input type="hidden" id="MyMoneyHidden" value="'+ row.Money +'">');
							budgetDate = new Date(row.Date);
							lastDayOfBudgetMonth = new Date(budgetDate.getFullYear(), budgetDate.getMonth() + 1, 0)
							totalMoney = row.Money;
							targetSavings = row.Target;
          						$('#MyTarget').append(row.Target);
          						$('#Myid').append(row.BudgetId);
          						$('#Myid').val(row.BudgetId);
        						}
      						}
     					},errorHandler);
 					},errorHandler,nullHandler);

					
					db.transaction(function(transaction) {
   					transaction.executeSql('SELECT * FROM Expense WHERE Budget = ?;', [id],
     					function(transaction, result) {
      					if (result != null && result.rows != null) {
						
        					for (var i = 0; i < result.rows.length; i++) {
          						var row = result.rows.item(i);
          							totalExpense = totalExpense + (row.Amount * row.Occurence);
        						}
						differences = getDaysBetween(dateToday,lastDayOfBudgetMonth) + 1;
						monthlyBudgetLeft = (totalMoney - targetSavings) - totalExpense;
						dailyBudgetLeft = monthlyBudgetLeft / differences;
						$('#recommendedExpense').append('The recommended expense may not be more than <b>â‚±'+ monthlyBudgetLeft.toFixed(2) +'</b>');
						$('#hiddenRecommendedExpenseMonthly').val(monthlyBudgetLeft);
						$('#dailyBudget').append('<center><div class="ui-input-btn ui-btn ui-btn-inline ui-shadow ui-corner-all"><h3>â‚± '+ dailyBudgetLeft.toFixed(2) +'</h3><input type="button" data-enhanced="true" value="Enhanced"></div></center>');
						$('#monthlyBudget').append('<center><div class="ui-input-btn ui-btn ui-btn-inline ui-shadow ui-corner-all"><h3>â‚± '+ monthlyBudgetLeft.toFixed(2) +'</h3><input type="button" data-enhanced="true" value="Enhanced"></div></center>');

      						}
     					},errorHandler);
 					},errorHandler,nullHandler);
 					
 					return;
			}

			function checkAddBudgetInputs() {
				var value = $.trim($("#txName").val());
				if(value == 0){
					executeAlert(1);
					$("#txName").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					$.mobile.changePage("index.html#addBudget");
					return;
				}
				else{
					if($.isNumeric(value)){
						//window.alert("Please type in a valid Name of your budget");
						executeAlert(2);
						$("#txName").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						$.mobile.changePage("index.html#addBudget");
						return;
					}
				}
				
				value = $("#txMoney").val();
				if($.trim(value) == 0){
					//window.alert("Please type in your income.");
					executeAlert(3);
					$("#txMoney").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					$.mobile.changePage("index.html#addBudget");
					return;
				}
				else{
					if($.isNumeric(value)){
						if((new Number(value)) < 0){
							executeAlert(4);
							//window.alert("Please type in a positive income.");
							$("#txMoney").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
							$.mobile.changePage("index.html#addBudget");
							return;
						}						
					}
					else{
						executeAlert(5);
						//window.alert("Please type in a Valid number.");
						$("#txMoney").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						$.mobile.changePage("index.html#addBudget");
						return;
					}
				}
				
				var target = $("#txTarget").val();
				if($.trim(target) == 0){
					//window.alert("Please type in your Target saving.");
					executeAlert(6);
					$("#txTarget").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					$.mobile.changePage("index.html#addBudget");
					return;
				}
				else{
					if($.isNumeric(target)){
						if((new Number(target)) < 0){
							executeAlert(7);
							//window.alert("Please type in a positive Target saving.");
							$("#txTarget").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
							$.mobile.changePage("index.html#addBudget");
							return;
						}
						else if((new Number(target)) == value){
							executeAlert(8);
							//window.alert("The Target saving is the same with your income.");
							$("#txTarget").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
							$.mobile.changePage("index.html#addBudget");
							return;
						}
						else{
							AddValueToDB();
							return;
						}
					}
					else{
						executeAlert(9);
						//window.alert("Please type in a Valid number.");
						$("#txTarget").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						$.mobile.changePage("index.html#addBudget");
						return;
					}
				}
			}
			
			function checkAddExpenseInputs() {
				if($.trim($('#txDescription').val()) == 0){
					//window.alert("Please type in the Description of your expense");
					executeAlert(10);
					$("#txDescription").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					$.mobile.changePage("index.html#addExpensePage");
					return;
				}
				else{
					if($.isNumeric($.trim($('#txDescription').val()))){
						//window.alert("Please type in a valid Description of your expense");
						executeAlert(11);
						$("#txDescription").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						$.mobile.changePage("index.html#addExpensePage");
						return;
					}
				}
				
				var amount = $('#txAmount').val();
				if($.trim(amount) == 0){
					executeAlert(12);
					//window.alert("Please type in the Amount of your expense");
					$("#txAmount").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					$.mobile.changePage("index.html#addExpensePage");
					return;
				}
				else{
					if($.isNumeric($.trim(amount))){
						if(new Number($.trim(amount)) < 0){
							executeAlert(13);
							//window.alert("The amount you typed in is negative.");
							$("#txAmount").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
							$.mobile.changePage("index.html#addExpensePage");
							return;
						}
						else{
							if((new Number($('#total').val())) > (new Number($('#hiddenRecommendedExpenseMonthly').val()))){
								//window.alert("The amount you are trying to spend is bigger than the remaining budget and will obstruct you from getting the target savings.");
								executeAlert(14);
								$("#txAmount").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
								$.mobile.changePage("index.html#addExpensePage");
								return;
							}
						}
					}
					else{
						executeAlert(15);
						//window.alert("Please type a valid Amount of your expense");
						$("#txAmount").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						$.mobile.changePage("index.html#addExpensePage");
						return;
					}
				}
				
				var occurence = $('#txOccurence').val();
				if($.trim(occurence) == 0){
					executeAlert(16);
					//window.alert("Please type in the number of occurence of your expense.");
					$("#txOccurence").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
					$.mobile.changePage("index.html#addExpensePage");
					return;
				}
				else{
					if($.isNumeric($.trim(occurence))){
						if(new Number($.trim(occurence)) < 0){
							executeAlert(17);
							//window.alert("The occurence of expense you typed in is negative.");
							$("#txOccurence").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
							$.mobile.changePage("index.html#addExpensePage");
							return;
						}
						else{
							AddExpense();
							return;
						}
					}
					else{
						executeAlert(18);
						//window.alert("Please type in a valid number of occurence of your expense.");
						$("#txOccurence").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);
						$.mobile.changePage("index.html#addExpensePage");
						return;
					}
										
				}
			}


			function confirmDeleteBudget(){
				$.noty.defaults = {
					layout: 'topCenter', 
					theme: 'defaultTheme',
					dismissQueue: true, 
					maxVisible: 1, 
					template: '<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',
					animation: {  
						open: {height: 'toggle',opacity:'1'}, 
						close: {height: 'toggle',opacity:'0.1'}, 
						easing: 'linear', 
						speed: 200 
					},
					timeout: false, 
					force: false, 
					modal: true, 
					closeWith: [ 'click'],
					callback: {
						onShow: function() {},
						afterShow: function() {},
						onClose: function() {},
						afterClose: function() {}
					}
				};
				var n = noty({
					text: 'Are you sure you want to Delete?', 
					type: 'confirm', 
					buttons: [
    							{addClass: 'btn btn-primary', text: 'Ok', onClick: function($noty) {
							        $noty.close();
								confirmedDeleteBudget();		
							 	}
    							},
							{addClass: 'btn btn-danger', text: 'Cancel', onClick: function($noty) {
								$noty.close();
								cancelledDeleteBudget();
								}
							}
						]
					});
			}
			
			function cancelledDeleteBudget() {
				var id = $('#Myid').val();
					db.transaction(function(transaction) {
						transaction.executeSql(
								'SELECT * BudgetDB WHERE Budgetid = ?;', [id]);
					});
				window.location.assign("index.html#editBudget");
				ListDBValues();
				GetName(id);
				return;
			}
	
			function confirmedDeleteBudget() {
				var id = $('#Myid').val();

					db.transaction(function(transaction) {
						transaction.executeSql(
								'DELETE FROM BudgetDB WHERE BudgetId = ?;',
								[id],
								nullHandler, errorHandler);
					});

					db.transaction(function(transaction) {
						transaction.executeSql(
								'DELETE FROM Expense WHERE Budget = ?;',
								[id],
								nullHandler, errorHandler);
					});
					alertSuccess(4);
					window.location.assign("index.html#mainpage");
					
					ListDBValues();
					GetName(id);
					
					return false;
					
			}

			

			function updateBudget(){
				var id = $('#Myid').val();
				//var bdgtnm = document.getElementById("bdgtnm");
				//var trgt = document.getElementById("trgt");
				db.transaction(
				    function (transaction) {			
				    	transaction.executeSql('UPDATE BudgetDB SET Name=?, Target=? WHERE BudgetId = ?;', [$('#bdgtnm').val(), $('#trgt').val(), id]);
				    }
				);
				ListDBValues();
				GetName(id);
				//alert("Budget updated successfully!");
				alertSuccess(5);
				$.mobile.changePage("index.html#editBudget");
				return;
			}


		</script>


	<title>Budget Planner</title>
    </head>

    <body onload="onBodyLoad()">
    
    	<div id="fb-root"></div>
		<script>
			(function(d, s, id) {
			  var js, fjs = d.getElementsByTagName(s)[0];
			  if (d.getElementById(id)) return;
			  js = d.createElement(s); js.id = id;
			  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1382388548666955";
			  fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
		</script>
    
   		<div data-role="page" id="mainpage" onload="onBodyLoad()" style="background-image: url('img/bg.jpg'); 
																													   background-attachment: fixed; 
																													   background-repeat: repeat; 
																													   background-size: 100% 100%;">

		<div data-role="page" id="moneySaved">
			I SAVED THIS MUCH USING MOBILE BUDGET PLANNER
		</div>

			<div data-role="header">
    			<h1>Home</h1>
  			</div>
			<div data-role="content">
  				<a href="#addBudget" data-role="button" onClick="clearAddBudgetField()">Add Budget</a>
  				<div data-role="collapsible" data-collapsed="true" data-theme="b" data-content-theme="b" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
					<h2>View Budget List</h2>
						<input type="hidden" id="currentBudgetID">
						<div id="Budgets"></div>
				</div>
  			</div>
  			<!-------------FACEBOOK-------------------->
  			<!-- <div data-role ="content">MyMoneyHidden
  				<a href="#facebookConnect" data-role="button" onClick="connectToFacebook()">
  				Share to Facebook</a>
  			</div> -->
  			<!------------------------------------------>
		</div>
		
		<!-------------------------FACEBOOK---------------------------------->
		<div data-role="page" id="facebookConnect">
			<div data-role="header">
				<h1>Login</h1>
			</div>
			<div data-role="content">
			<input type="text" placeholder="Username" id="txFbUsername">
			<input type="text" placeholder="Password" id="txFbPasword">
			<a href="#mainpage" class="ui-btn" onclick="">Login</a> 
			<a href="#mainpage" class="ui-btn">Back</a>
			</div>
		</div>
		<!------------------------------------------------------------------->

		<div data-role="page" id="addBudget" onload="onBodyLoad()" style="background-image: url('img/bg.jpg'); 
																													    background-attachment: fixed; 
																													    background-repeat: repeat; 
																													    background-size: 100% 100%;">
			<div data-role="header">
				<h1>Add Budget</h1>
			</div>
			<div data-role="content">
				<p>This is where you will add a new budget</p>
				<form name="addForm" method="post" onsubmit="AddValueToDB()">
					<input type="text" placeholder="Budget name" id="txName">
					<input type="text" placeholder="Income" id="txMoney">
					<label for="Target">Target Savings:</label>
					<input type="range" id="txTarget" min="0">
					<script>
						document.write('<input type="hidden" id="txDateCreated" value="'+ new Date() +'">');
					</script>
					<a class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-plus ui-btn-b" onClick="checkAddBudgetInputs()">Add Budget</a>
				</form>
				<br>
				<a href="#mainpage" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-back ui-btn-b">Back</a>
			</div>
		</div>

		<div data-role="page" id="SummaryPage" style="background-image: url('img/bg.jpg'); 
																						background-attachment: fixed; 
																					    background-repeat: repeat; 
																						background-size: 100% 100%;">
			<div data-role="header">
				<a href="#mainpage" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-left ui-icon-home">Home</a>
				<h1>Summary</h1>
			</div>
			<br>
			<input type="hidden" id = "MyExpenseId" for="MyExpenseId"></input>
			<div id="viewSummaryPage"></div>
		</div>
		
		<div data-role="page" id="addExpensePage" style="background-image: url('img/bg.jpg'); 
																							background-attachment: fixed; 
																							background-repeat: repeat; 
																							background-size: 100% 100%;">
			<div data-role="header">
				<a href="#mainpage" class="ui-btn-left ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-left ui-icon-home">Home</a>
				<h1>Add Expense</h1>
			</div>
			<div data-role="content">
				<p id="recommendedExpense"></p>
				<input type="hidden" id="hiddenRecommendedExpenseMonthly" value="0">

				<form name="addExpenseForm" method="post">
				<fieldset class="ui-field-contain">
    					<label for="category">Select Category</label>
    					<select name="category" id="txCategory">
      						<option value="Food">Food / Beverages</option>
      						<option value="Transportation">Transportation</option>
      						<option value="Education">Education</option>
							<option value="Clothing">Clothing</option>
							<option value="Personal">Personal</option>
							<option value="Home">Home</option>
							<option value="Other">Other</option>
    					</select>
  				</fieldset>
				<input type="text" placeholder="Description" id="txDescription">
				<input type="text" placeholder="Amount" id="txAmount">
				<fieldset class="ui-field-contain">
    					<label for="occurence">Select frequency</label>
    						<select name="occurence" id="txFrequency">
      							<option selected="selected" value="4">Weekly</option>
      							<option value="1">Monthly</option>
      							<option value="Other">Other</option>
   						</select>
  					</fieldset> 
				<input type="text" placeholder="Number of Occurence per month" id="txOccurence" value="4">
				<script>
					document.write('<input type="hidden" id="txDate" value="'+ new Date() +'">');
				</script>	
				<label for="total">Total</label>			
				<input name="total" type="text" id="total" value="0" readonly>
				<a class="ui-btn" onClick="checkAddExpenseInputs()">Add Expense</a>
				</form>
				<a href="#editBudget" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-back ui-btn-b">Back</a>
			</div>
		</div>
		
		<div data-role="page" id="editBudget" onload="onBodyLoad()" style="background-image: url('img/bg.jpg'); 
																														background-attachment: fixed; 
																														background-repeat: repeat; 
																														background-size: 100% 100%;">
			<div data-role="header">
				<h1>Edit Budget</h1>
			</div>
			<div data-role="content">
				<a href="http://goo.gl/XPaG5Y" data-inline="true" class="ui-btn ui-shadow ui-btn-inline ui-corner-all ui-btn-b ui-mini"><img src="img/fb.png" alt="facebook icon"> Share on Facebook</a><br>
				<b>Budget Name: <small id="MyName"></small></b><br>
				<b>Budget Money: â‚±<small id="MyMoney"></small></b><br>
				<b>Target: â‚±<small id="MyTarget"></small></b>
				<br>
				<br>
				<center>
					<h3>Estimated Daily Budget: </h3><div id="dailyBudget"></div>
					<h3>Remaining Monthly Budget: </h3><div id="monthlyBudget"></div>
				</center>
				<a href="#addExpensePage" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-plus ui-btn-b" onClick="clearAddExpenseField()">Add Expense</a>
				<a class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left  ui-icon-grid ui-btn-b" onCLick="viewSummary()">Summary</a>
				<a href="#mainpage" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-back ui-btn-b">Back</a>
			</div>
			<div data-role="footer" data-theme="b" data-position="fixed" style="text-align:center;">
				<a href="#popupedit" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-icon-edit ui-btn-icon-left ui-btn-b" data-transition="none" onClick="clearEditBudgetField()">Edit Budget</a>
				<div data-role="popup" id="popupedit" data-theme="a" class="ui-corner-all">
				    <form>
				        <div style="padding:10px 20px;">
				            <h3>Edit your budget</h3>
				            <input type="hidden" id = "Myid" for="Myid"></input>
				            <label for="bdgtnm" class="ui-hidden-accessible">Budget Name:</label>
				            <input type="text" name="budget_name" id="bdgtnm" value="" placeholder="budget name" data-theme="a">
				            <label for="trgt" class="ui-hidden-accessible">Target:</label>
				            <input type="text" name="budget_target" id="trgt" value="" data-theme="a" placeholder="target">
				            <a class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-btn-b ui-icon-edit" onClick="validateEditBudgetInputs()">Update</a>
							<a href="#editBudget" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-btn-b ui-icon-arrow-l">Cancel</a>	
				        </div>
				    </form>
				</div>
				<a href="#editBudget" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-delete ui-btn-b" onClick="confirmDeleteBudget()">Delete Budget</a>
			</div>
		</div>

   
    </body>
</html>
